<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>DCGAN face generator demo</title>

<script src="js/jquery-1.8.3.min.js"></script>
<script src="js/vis.js"></script>
<script src="js/util.js"></script>

<script src="transpiler/system.js"></script>
<script>
SystemJS.config({
    map: {
      'plugin-traceur': 'transpiler/plugin-traceur.js',
      'traceur': 'transpiler/traceur.js',
      'traceur-runtime': 'transpiler/traceur-runtime.js'
    },
    meta: {
      'traceur': {
        format: 'global',
        exports: 'traceur',
        scriptLoad: false
      },
      'traceur-runtime': {
        format: 'global',
        exports: '$traceurRuntime'
      }
    },
    transpiler: 'plugin-traceur',
    transpilerRuntime: false,
    baseURL: '/'
})
</script>

<!--<script src="js/image-helpers.js"></script>
<script src="js/pica.js"></script>-->

<style type="text/css">
<!--
  .box{
    float: left;
    width: 200px;
  }

-->
</style>



<script type="text/javascript">

var test, initialize, shuffle, reset_value;



SystemJS.import('convnet.js').then(function(convnet) {

    var num_inputs = 27; // 9 eyes, each sees 3 numbers (wall, green, red thing proximity)
    var num_actions = 5; // 5 possible angles agent can turn
    var temporal_window = 1; // amount of temporal memory. 0 = agent lives in-the-moment :)
    var network_size = num_inputs * temporal_window + num_actions * temporal_window + num_inputs;

    // the value function network computes a value of taking any of the possible actions
    // given an input state. Here we specify one explicitly the hard way
    // but user could also equivalently instead use opt.hidden_layer_sizes = [20,20]
    // to just insert simple relu hidden layers.
    var layer_defs = [];
    layer_defs.push({type:'input', out_sx:1, out_sy:1, out_depth:network_size});
    layer_defs.push({type:'fc', num_neurons: 50, activation:'relu'});
    layer_defs.push({type:'fc', num_neurons: 50, activation:'relu'});
    layer_defs.push({type:'regression', num_neurons:num_actions});
    var net = new convnet.Net();
    net.makeLayers(layer_defs);

    // options for the Temporal Difference learner that trains the above net
    // by backpropping the temporal difference learning rule.
    var tdtrainer_options = {learning_rate:0.001, momentum:0.0, batch_size:64, l2_decay:0.01};
    var tdtrainer = new Trainer(net, tdtrainer_options);

    var dqn_options = {
        temporal_window: temporal_window,
        experience_size: 30000,
        start_learn_threshold: 1000,
        gamma : 0.7,
        learning_steps_total: 200000,
        learning_steps_burnin: 3000,
        epsilon_min: 0.05,
        epsilon_test_time: 0.05
    };

    var brain = new convnet.DQN(num_inputs, num_actions, tdtrainer, dqn_options); // woohoo
    var agent = new agent(brain);    
    var world = new convnet.World(1080, 720, agent);
    world.tick();
  
});



 
</script>

</head>
<body>

</body>
</html>


